{% extends "studies/lyt.html" %}

{% block css %}
<style>
    .Ans_st {
        text-decoration: underline;
        font-style: italic;
        color: #a80404;
    }
</style>
{% endblock %}

{% block content %}
<div class="row justify-content-between">
    <div class="col-md-8 mb-2">
        <div class="card p-2">
            lorem*500
        </div>
    </div>
    <div class="col-md-4 ">
        <div class="card p-2">
            Words transcription:
            <div class="position-relative">
                <input type="text" class="form-control" name="transcribe">
                <button class="btn btn-primary tr position-absolute top-0 end-0">
                    get
                </button>

            </div>
            <div class="res">

            </div>
            <hr>

            <div class="mt-5">
                Words stress


                <div class="d-flex">
                    <input type="text" class="form-control" name="stress">
                    <button class="btn btn-primary stress">
                        Stress
                    </button>

                </div>
                <div class="res2">

                </div>
                <hr>

            </div>


        </div>
        <div class="card p-2 mt-3">
            Words stress
            <div class="position-relative">
                <input type="text" class="form-control" name="stress">
                <button class="btn btn-primary stress position-absolute top-0 end-0">
                    get
                </button>

            </div>
            <hr>
            <div class="res2">

            </div>
        </div>
    </div>
</div>

{% endblock %}



{% block js %}
<script>
    trinp = $('input[name=transcribe]')
    trbtn = $('.transcribe')

    trbtn.click(() => {
        $('.res').text('Waiting...')
        w=trinp.val()
        $.ajax({
            type: "POST",
            url: "{{url_for('studies.transcribe')}}",
            data: { 'word': w },
            success: (res) => {
                trinp.val('')
                $('.res').html(`
                    ${w}:
                    <div class="tr"></div>
                        ${res.tran}
                    <div class="mt-3">
                        Audio:
                        <div class="audio">

                            <audio id="audio_uk" preload="auto">
                                <source src="${res.mp}" type="audio/mpeg">
                                Your browser does not support the audio element.
                            </audio>
                        </div>
                        <span class='h1' onclick="document.getElementById('audio_uk').play()">â–·</span>

                    </div>`)
            },
            error:()=>{
                $('.res').html('Somting went wrong')
            }


        });
    })


    strinp = $('input[name=stress]')
    strbtn = $('.stress')
    strbtn.click(() => {
            $('.res2').text('Waiting...')
            w = strinp.val()
            $.ajax({
                type: "POST",
                url: "{{url_for('studies.stress')}}",
                data: { 'word': w },
                success: (res) => {
                    strinp.val('')
                    $('.res2').html(`
                    ${w}:
                    <div>
                        <p>N. syllables: ${res.n}</p>
                        <p>${res.s}</p>
                        <p>Stress: ${res.press}</p>
                    </div>
                    `)
                },
                error:()=>{
                    $('.res2').html('Somting went wrong')
                }
            });
        })
</script>
{% endblock %}