{% extends "studies/lyt.html" %}

{% block content %}
<div class="row">
    <div class="col-md-7  me-2 mb-2">
        <div class="card p-2">
            sdd
        </div>
    </div>
    <div class="col-md-4 ">
        <div class="card p-2">

            <div class="d-flex">
                <input type="text" class="form-control" name="transcribe">
                <button class="btn btn-primary tr">
                    Transcribe
                </button>
            
            </div>
            <hr>
            <div class="res">
        
            </div>
        </div>
    </div>
</div>

{% endblock %}



{% block js %}
<script>
    trinp=$('input[name=transcribe]')
    trbtn=$('.tr')
    trbtn.click(()=>{
        $('.res').text('Waiting...')
        w=trinp.val()
        console.log(w)
        $.ajax({
            type: "POST",
            url: "{{url_for('studies.transcribe')}}",
            data: {'word': w},
            success: (res)=>{
                trinp.val('')
                console.log(res)
                $('.res').html(`
                    Transcription:
                    <div class="tr"></div>
                        ${res.tran}
                    <div class="mt-3">
                        Audio:
                        <div class="audio">
                            
                            <audio id="audio_uk" preload="auto">
                                <source src="${res.mp}" type="audio/mpeg">
                                Your browser does not support the audio element.
                            </audio>
                        </div>
                        <span class='h1' onclick="document.getElementById('audio_uk').play()">â–·</span>
                        
                    </div>`)
            }
        });
    })
</script>
{% endblock %}